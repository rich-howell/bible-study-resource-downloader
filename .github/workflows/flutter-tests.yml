name: Flutter Tests

on:
  pull_request:
  push:
    branches: [main]

jobs:
  # Model Tests
  model-tests:
    name: Model – SpotLogModel
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/models/spot_log_model_test.dart

  # Spot Test
  spot-test:
    name: Spot – Base Spot Test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/models/spot_test.dart

  # Screen Tests (split by job)
  about-page:
    name: Screen – About Page
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/screens/about_page_test.dart

  about-section:
    name: Screen – About Section
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/screens/about_section_test.dart

  import-section:
    name: Screen – Import Section
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/screens/import_section_test.dart

  settings-screen:
    name: Screen – Settings Screen
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/screens/settings_screen_test.dart

  my-spots:
    name: Screen – My Spots
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/screens/my_spots_screen_test.dart

  filters:
    name: Filters – My Spots Filters
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/screens/my_spots_filters_test.dart

  timeline:
    name: Timeline – My Spots Timeline
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.38.5'
          cache: true
      - run: flutter pub get
      - run: flutter test test/screens/my_spots_timeline_test.dart
